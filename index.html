<!doctype html>
<html ng-app="levelBuilder">
    <head>
        <meta charset="UTF-8">
        <!-- Libraries -->
        <script src="http://pierrechanel-gauthier.com/lib/js/angular.min.js"></script>
        <script src="http://pierrechanel-gauthier.com/lib/js/jQuery.js"></script>
        <script src="http://pierrechanel-gauthier.com/lib/bootstrap/js/bootstrap.min.js"></script>
        <!-- Controllers -->
        <script src="js/controllers/levelController.js"></script>
        <!-- CSS -->
        <link rel="stylesheet" href="http://pierrechanel-gauthier.com/lib/bootstrap/css/themes/slate.css" type="text/plain">
        <link rel="stylesheet" href="css/styles.css" type="text/plain">
    </head>
    <body class="container" ng-controller="levelController">
        <div id="file-drop" imagedrop on-image-drop="imageDropped()"></div>
        <div class="bsa well">
            <form class="form-inline">
                <!--<label for="name">Nom du niveau : </label>-->
                <input id="name" type="text" class="form-control" ng-model="name" placeholder="Nom du niveau" style="width:500px;">
                <!--<label for="gx" style="margin-left:50px;">Gravité : </label>-->
                <input id="gx" type="number" class="form-control" ng-model="gx" placeholder="Gravité x" style="width:105px;">
                <input id="gy" type="number" class="form-control" ng-model="gy" placeholder="Gravité y" style="width:105px;">
            </form>
        </div>
        <div class="bsa well main" style="margin-right:15px;">
            <!--<canvas id="canvas"></canvas>-->
            <div class="navbar navbar-default" id="btnwrapper">
                <div class="navbar-collapse collapse navbar-responsive-collapse" style="padding:0">
                    <ul class="nav navbar-nav">
                        <li ng-class="{active: createType=='select1'||createType=='select2'}" class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="">Sélection <b class="caret"></b></a>
                            <ul class="dropdown-menu">
                                <li ng-class="{active: createType=='select1'}" ng-click="setCreateType('select1')"><a href="">Textures</a></li>
                                <li ng-class="{active: createType=='select2'}" ng-click="setCreateType('select2')"><a href="">Éléments</a></li>
                            </ul>
                        </li>
                        <li ng-class="{active: createType=='origin'}" ng-click="setCreateType('origin')"><a href="">Origine</a></li>
                        <li ng-class="{active: createType=='rect'}" ng-click="setCreateType('rect')"><a href="">Rectangle</a></li>
                        <li ng-class="{active: createType=='circle'}" ng-click="setCreateType('circle')"><a href="">Cercle</a></li>
                        <li ng-class="{active: createType=='poly'}" ng-click="setCreateType('poly')"><a href="">Polygone</a></li>
                        <li ng-class="{active: createType=='path'}" ng-click="setCreateType('path')"><a href="">Chemin</a></li>
                        <li ng-if="isSelected!=false" ng-class="{active: createType=='infos'}" ng-click="setCreateType('infos')"><a href="">Propriétés</a></li>
                    </ul>
                    <a class="navbar-brand coord" href="">x : {{planCoord.x}} | y : {{planCoord.y}}</a>
                </div>
            </div>
            <div id="whitesheet" ng-right-click="actionEndPath()" ng-left-click="actionBegin()" ng-mouseup="actionEnd()" ng-mousemove="setMouseCoord($event);actionUpdate();">
                <svg id="svg" ng-class="{background: createType=='select1'}">
                    <circle class="origin" ng:attr:cx="{{origin.cx}}" ng:attr:cy="{{origin.cy}}" ng:attr:r="{{origin.r}}" />
                    <g ng-repeat="e in elements">
                        <rect ng:attr:id="{{e.id}}" ng-click="setSelected($event)" ng-if="e.type=='rect'" ng:attr:x="{{e.x}}" ng:attr:y="{{e.y}}" ng:attr:width="{{e.width}}" ng:attr:height="{{e.height}}" ng:attr:style="{{e.style}}" />
                        <circle ng:attr:id="{{e.id}}" ng-click="setSelected($event)" ng-if="e.type=='circle'" ng:attr:cx="{{e.x}}" ng:attr:cy="{{e.y}}" ng:attr:r="{{e.r}}" />
                        <path ng:attr:id="{{e.id}}" class="poly" ng-click="setSelected($event)" ng-if="e.type=='poly'" ng:attr:d="{{e.d}}" />
                        <path ng:attr:id="{{e.id}}" ng-click="setSelected($event)" ng-if="e.type=='path'" ng:attr:d="{{e.d}}" />
                        <!-- Modale -->
                        <div class="modal fade" ng:attr:id="modalInfo{{e.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                        <h4 class="modal-title" id="myModalLabel">Propriétés de l'élément {{e.name}}</h4>
                                    </div>
                                    <div class="modal-body">

                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Fermer</button>
                                    </div>
                                </div><!-- /.modal-content -->
                            </div><!-- /.modal-dialog -->
                        </div><!-- /.modal -->
                    </g>
                </svg>
                <img ng-repeat="t in textures" class="texture" ng-click="setSelected($event)" ng:attr:src="{{t.src}}">
            </div>
        </div>
        <div class="bsa well main">
            <textarea id="xml" class="form-control">
            </textarea>
        </div>
    </body>
</html>